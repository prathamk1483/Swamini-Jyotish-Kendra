<!DOCTYPE html>
<html lang="mr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Jyotish Karyalay - Document Generator</title>
    <link href="https://fonts.googleapis.com/css2?family=Mukta:wght@400;600;700&family=Noto+Sans+Devanagari:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-blue: #0A2E4B;
            --accent-green: #187A22;
            --border-color: #D3D9DE;
            --bg-color: #F8F9FA;
            --text-dark: #212529;
            --text-muted: #6C757D;
            --sidebar-bg: #2C3E50;
        }

        body { font-family: 'Mukta', 'Noto Sans Devanagari', sans-serif; margin: 0; padding: 0; background-color: #e9ecef; color: var(--text-dark); -webkit-print-color-adjust: exact; print-color-adjust: exact; display: flex; height: 100vh; overflow: hidden; }

        /* --- SIDEBAR --- */
        .sidebar { width: 340px; background-color: var(--sidebar-bg); color: white; padding: 20px; box-shadow: 2px 0 5px rgba(0,0,0,0.1); display: flex; flex-direction: column; z-index: 10; overflow-y: auto; }
        .sidebar h2 { margin-top: 0; font-size: 20px; border-bottom: 1px solid #455A64; padding-bottom: 10px; }
        .form-group { margin-bottom: 15px; }
        .form-group label { display: block; margin-bottom: 5px; font-size: 14px; color: #B0BEC5; }
        .form-group input:not([type="checkbox"]), .form-group select, .form-group textarea { width: 100%; padding: 10px; border: 1px solid #455A64; border-radius: 4px; background-color: #34495E; color: white; font-size: 15px; box-sizing: border-box; font-family: inherit; }
        .form-group textarea { resize: vertical; min-height: 100px; }
        .form-group input[type="time"]::-webkit-calendar-picker-indicator, .form-group input[type="date"]::-webkit-calendar-picker-indicator { filter: invert(1); }

        .print-btn { margin-top: 15px; margin-bottom: 20px; background-color: #F47A20; color: white; border: none; padding: 15px; font-size: 16px; font-weight: bold; border-radius: 4px; cursor: pointer; transition: background-color 0.2s; width: 100%; }
        
        .btn-add { background-color: #28a745; color: white; border: none; padding: 8px; border-radius: 4px; cursor: pointer; font-weight: bold; width: 100%; margin-bottom: 5px; }
        .btn-undo { background-color: #ffc107; color: #212529; border: none; padding: 8px; border-radius: 4px; cursor: pointer; font-weight: bold; width: 100%; margin-bottom: 5px; }
        .btn-clear { background-color: #dc3545; color: white; border: none; padding: 8px; border-radius: 4px; cursor: pointer; font-weight: bold; width: 100%; margin-bottom: 20px; }

        /* --- SIMPLE CHECKLIST STYLES --- */
        .checkbox-list { display: flex; flex-direction: column; gap: 8px; margin-bottom: 25px; }
        .checkbox-item { display: flex; align-items: center; gap: 10px; font-size: 15px; color: white; cursor: pointer; user-select: none; }
        .checkbox-item input { cursor: pointer; width: 16px; height: 16px; margin: 0; flex-shrink: 0; accent-color: #28a745; }

        /* --- WORKSPACE & GLOBAL PAGE STYLES --- */
        .main-workspace { flex: 1; padding: 40px; overflow-y: auto; display: flex; flex-direction: column; align-items: center; gap: 40px;}
        .page-container { width: 850px; background: white; padding: 30px 40px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); border-radius: 8px; box-sizing: border-box; flex-shrink: 0; }
        
        /* --- GLOBAL HEADER --- */
        .page-header { display: flex; justify-content: space-between; align-items: flex-end; border-bottom: 2px solid var(--primary-blue); padding-bottom: 12px; margin-bottom: 15px; }
        .header-title .main-heading { font-size: 26px; color: var(--primary-blue); margin: 0; }
        .header-contact { text-align: right; }
        .logo-area { text-align: center;display: flex; align-items: center; justify-content: flex-end; font-size: 20px; font-weight: 700; color: var(--primary-blue);z-index: 10; }
        .logo-area span.swastik { color: #F47A20; font-size: 28px; margin-right: 8px; }
        .contact-details { font-size: 14px; color: var(--text-dark); line-height: 1.4; }
        .contact-details strong { color: var(--primary-blue); }
        .logo{height: 40px;width: 40px;z-index: 2;}

        .box { border: 1px solid var(--border-color); border-radius: 6px; background: white; margin-bottom: 12px; padding: 12px; page-break-inside: avoid; }
        .info-box { text-align: center; background-color: #fafbfc; }
        .info-row-1 { font-size: 18px; margin-bottom: 5px; }
        .info-row-1 strong { color: var(--primary-blue); }
        .info-row-2 { font-size: 18px; color: var(--primary-blue); }

        .summary-box { display: flex; justify-content: space-between; align-items: center; padding: 10px 30px; background-color: #fafbfc; }
        .summary-item { text-align: center; }
        .rashi-title { font-size: 20px; font-weight: bold; color: var(--accent-green); }
        .lagna-title { font-size: 16px; color: var(--accent-green); margin-top: 5px; }
        .summary-center h3 { margin: 0 0 5px 0; font-size: 20px; color: var(--accent-green); }
        .summary-center p { margin: 0; font-size: 14px; color: var(--accent-green); }
        .mangal-dosh { font-weight: bold; font-size: 18px; }

        .details-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 12px; }
        .detail-card { padding: 10px; background-color: #fafbfc; display: flex; justify-content: center; }
        
        .detail-table { border-collapse: collapse; width: 100%; }
        .detail-table td { padding: 4px 10px; font-size: 15px; vertical-align: middle; }
        .detail-table td:first-child { text-align: right; color: var(--text-dark); width: 50%; border-right: 1px solid transparent; }
        .detail-table td:last-child { color: var(--accent-green); font-weight: 500; text-align: left; }

        .main-content { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; padding: 15px; background-color: #fafbfc; }
        
        .chart-container { display: flex; align-items: center; justify-content: center; height: 100%; }
        .svg-chart { width: 100%; height: auto; max-width: 310px; display: block; }
        .chart-lines { stroke: #a0aab5; stroke-width: 1; fill: none; }
        .chart-num { font-size: 11px; fill: #6C757D; font-weight: bold; }
        .chart-planet { font-size: 13px; fill: var(--primary-blue); font-weight: 600; }

        .planet-table-section h3 { margin-top: 0; color: var(--primary-blue); font-size: 18px; margin-bottom: 8px; }
        .planet-table { width: 100%; border-collapse: collapse; font-size: 14px; }
        .planet-table th { text-align: left; padding-bottom: 6px; color: var(--text-dark); font-weight: 600; }
        .planet-table td { padding: 2px 0; color: var(--text-dark); } 
        .planet-dot { display: inline-block; width: 10px; height: 10px; border-radius: 50%; margin-right: 5px; vertical-align: middle; }
        .dot-sun { background: #F47A20; } .dot-moon { background: #95A5A6; } .dot-merc { background: #7F8C8D; } .dot-ven { background: #F1C40F; } .dot-mars { background: #E74C3C; } .dot-jup { background: #A0522D; } .dot-sat { background: #7A8498; } .dot-node { background: transparent; }
        .footer-note { margin-top: 10px; font-size: 12px; color: var(--primary-blue); }
        
        .planet-suffix { font-weight: bold; color: var(--primary-blue); margin-left: 2px; }

        /* --- PAGE 2 SPECIFIC STYLES --- */
        .page-2-header { background-color: var(--primary-blue); color: white; margin: 0; padding: 8px; text-align: center; font-size: 18px; border-radius: 4px 4px 0 0; }
        
        .dasha-row { border-bottom: 1px solid #eaedf0; }
        .dasha-row:last-child { border-bottom: none; }
        .dasha-row td { padding: 8px 12px; font-size: 15px; }
        .dasha-row td:first-child { font-weight: bold; color: var(--accent-green); width: 30%; border-right: 1px solid #eaedf0; background: #fafbfc;}
        .dasha-row td:last-child { text-align: center; color: var(--text-dark); font-weight: 600; }
        
        .ratna-box { display: flex; flex-direction: column; justify-content: center; align-items: center; text-align: center; padding: 15px; box-sizing: border-box; background: #fffdf5; border: 2px dashed #f1c40f;}

        .mantra-row td { padding: 5px 10px; font-size: 13px; }
        .mantra-row td:first-child { font-weight: bold; color: var(--primary-blue); font-size: 15px; width: 22%; text-align: center; }
        .mantra-row td:nth-child(2) { text-align: center; font-weight: bold; color: var(--accent-green); font-size: 15px; }
        .mantra-row td:last-child { text-align: center; font-weight: normal; color: var(--text-dark); font-size: 13px; width: 22%; background: #fafbfc; border-left: 1px solid #eaedf0; }

        /* --- PAGE 3 (FALA SHRUTI) STYLES --- */
        .editable-textarea { width: 100%; min-height: 600px; padding: 20px; font-size: 18px; line-height: 1.8; border: none; outline: none; white-space: pre-wrap; color: var(--text-dark); }
        .editable-textarea:empty:before { content: attr(data-placeholder); color: #B0BEC5; font-style: italic; }

        @media (max-width: 850px) {
            body { flex-direction: column; height: auto; overflow: auto; }
            .sidebar { width: 100%; box-sizing: border-box; padding: 15px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
            .main-workspace { padding: 10px; width: 100%; box-sizing: border-box; gap: 20px; }
            .page-container { width: 100%; padding: 15px; }
            .page-header { flex-direction: column; text-align: center; align-items: center; gap: 15px; }
            .header-contact { text-align: center; }
            .logo-area { justify-content: center; }
            .details-grid, .main-content { grid-template-columns: 1fr; }
            .summary-box { flex-direction: column; gap: 15px; }
            .detail-table td:first-child { text-align: left; }
            #page2Grid { grid-template-columns: 1fr !important; }
        }

        /* --- PRINT STYLES --- */
        @media print {
            @page { size: A4 portrait; margin: 5mm; }
            body { background: white; display: block; height: auto; overflow: visible; margin: 0; }
            .sidebar { display: none !important; }
            .main-workspace { padding: 0; display: block; height: auto; overflow: visible; gap: 0; }
            .page-container { 
                box-shadow: none; padding: 5px 20px !important; width: 100% !important; max-width: 100% !important; border: none;
                transform: scale(0.97); transform-origin: top center; margin-bottom: 0; page-break-after: always;
            }
            .page-header { display: flex !important; flex-direction: row !important; text-align: left !important; align-items: flex-end !important; justify-content: space-between !important; }
            .header-contact { text-align: right !important; }
            .logo-area { justify-content: flex-end !important; }

            .page-2, .page-3 { page-break-before: always; padding-top: 20px !important; page-break-after: auto; }
            .box { border-color: #000; }
            .details-grid, .main-content { grid-template-columns: 1fr 1fr !important; display: grid !important; }
            .summary-box { flex-direction: row !important; display: flex !important; }
            .detail-table td:first-child { text-align: right !important; }
            #page2Grid { grid-template-columns: 1fr 1fr !important; display: grid !important; }
            .editable-textarea:empty:before { content: ""; }
        }
    </style>
</head>
<body>

    <aside class="sidebar">
        <h2>‡§ó‡•ç‡§∞‡§æ‡§π‡§ï ‡§§‡§™‡§∂‡•Ä‡§≤</h2>
        <div class="form-group"><label>‡§™‡•Ç‡§∞‡•ç‡§£ ‡§®‡§æ‡§µ</label><input type="text" id="clientNameInput" value="Amey Hatekar"></div>
        
        <div class="form-group" style="margin-bottom: 5px;"><label>‡§ú‡§®‡•ç‡§Æ‡§∏‡•ç‡§•‡§æ‡§®</label><input type="text" id="clientPlaceInput" value="Amravati, India"></div>
        
        <div style="display: flex; gap: 10px; margin-bottom: 15px;">
            <div class="form-group" style="margin-bottom: 0; flex: 1;"><label>‡§Ö‡§ï‡•ç‡§∑‡§æ‡§Ç‡§∂ (Lat)</label><input type="number" step="0.01" id="clientLatInput" value="20.93"></div>
            <div class="form-group" style="margin-bottom: 0; flex: 1;"><label>‡§∞‡•á‡§ñ‡§æ‡§Ç‡§∂ (Lon)</label><input type="number" step="0.01" id="clientLonInput" value="77.75"></div>
        </div>

        <div class="form-group" style="margin-bottom: 8px;">
            <label>‡§¶‡§∂‡§æ ‡§≠‡•ã‡§ó‡•ç‡§Ø ‡§ó‡•ç‡§∞‡§π ‡§µ ‡§ï‡§æ‡§≥</label>
            <select id="bhogyaPlanetInput" style="margin-bottom: 10px;">
                <option value="‡§∏‡•Ç‡§∞‡•ç‡§Ø">‡§∏‡•Ç‡§∞‡•ç‡§Ø</option><option value="‡§ö‡§®‡•ç‡§¶‡•ç‡§∞">‡§ö‡§®‡•ç‡§¶‡•ç‡§∞</option><option value="‡§Æ‡§Ç‡§ó‡§≤">‡§Æ‡§Ç‡§ó‡§≤</option>
                <option value="‡§¨‡•Å‡§ß" selected>‡§¨‡•Å‡§ß</option><option value="‡§ó‡•Å‡§∞‡•Å">‡§ó‡•Å‡§∞‡•Å</option><option value="‡§∂‡•Å‡§ï‡•ç‡§∞">‡§∂‡•Å‡§ï‡•ç‡§∞</option>
                <option value="‡§∂‡§®‡§ø">‡§∂‡§®‡§ø</option><option value="‡§∞‡§æ‡§π‡•Ç">‡§∞‡§æ‡§π‡•Ç</option><option value="‡§ï‡•á‡§§‡•Å">‡§ï‡•á‡§§‡•Å</option>
            </select>
        </div>
        <div style="display: flex; gap: 10px; margin-bottom: 15px;">
            <div class="form-group" style="margin-bottom: 0; flex: 1;"><label>‡§µ‡§∞‡•ç‡§∑‡•á (y)</label><input type="number" id="bhogyaYInput" value="10" min="0"></div>
            <div class="form-group" style="margin-bottom: 0; flex: 1;"><label>‡§Æ‡§π‡§ø‡§®‡•á (m)</label><input type="number" id="bhogyaMInput" value="3" min="0"></div>
            <div class="form-group" style="margin-bottom: 0; flex: 1;"><label>‡§¶‡§ø‡§µ‡§∏ (d)</label><input type="number" id="bhogyaDInput" value="13" min="0"></div>
        </div>
        
        <div class="form-group" style="margin-bottom: 15px; padding-bottom: 15px; border-bottom: 1px dashed #455A64;">
            <label class="checkbox-item" style="font-size: 15px;">
                <input type="checkbox" id="mangalDoshInput"> ‡§Æ‡§Ç‡§ó‡§≥ ‡§¶‡•ã‡§∑ ‡§Ü‡§π‡•á? (Has Mangal Dosh)
            </label>
        </div>

        <div class="form-group"><label>‡§ú‡§®‡•ç‡§Æ ‡§§‡§æ‡§∞‡•Ä‡§ñ</label><input type="date" id="clientDateInput" value="1998-04-25"></div>
        <div class="form-group"><label>‡§ú‡§®‡•ç‡§Æ ‡§µ‡•á‡§≥</label><input type="time" id="clientTimeInput" value="09:09"></div>

        <h2 style="margin-top: 15px; border-bottom: 1px solid #455A64; padding-bottom: 10px;">‡§™‡§Ç‡§ö‡§æ‡§Ç‡§ó ‡§§‡§™‡§∂‡•Ä‡§≤</h2>
        <div style="display: flex; gap: 10px; margin-bottom: 15px;">
            <div class="form-group" style="margin-bottom: 0; flex: 1.2;">
                <label>‡§µ‡§æ‡§∞</label>
                <select data-control="PanchangDay">
                    <option value="‡§∞‡§µ‡§ø‡§µ‡§æ‡§∞">‡§∞‡§µ‡§ø‡§µ‡§æ‡§∞</option><option value="‡§∏‡•ã‡§Æ‡§µ‡§æ‡§∞">‡§∏‡•ã‡§Æ‡§µ‡§æ‡§∞</option>
                    <option value="‡§Æ‡§Ç‡§ó‡§≥‡§µ‡§æ‡§∞">‡§Æ‡§Ç‡§ó‡§≥‡§µ‡§æ‡§∞</option><option value="‡§¨‡•Å‡§ß‡§µ‡§æ‡§∞">‡§¨‡•Å‡§ß‡§µ‡§æ‡§∞</option>
                    <option value="‡§ó‡•Å‡§∞‡•Å‡§µ‡§æ‡§∞">‡§ó‡•Å‡§∞‡•Å‡§µ‡§æ‡§∞</option><option value="‡§∂‡•Å‡§ï‡•ç‡§∞‡§µ‡§æ‡§∞">‡§∂‡•Å‡§ï‡•ç‡§∞‡§µ‡§æ‡§∞</option>
                    <option value="‡§∂‡§®‡§ø‡§µ‡§æ‡§∞" selected>‡§∂‡§®‡§ø‡§µ‡§æ‡§∞</option>
                </select>
            </div>
            <div class="form-group" style="margin-bottom: 0; flex: 1.2;">
                <label>‡§Æ‡§π‡§ø‡§®‡§æ</label>
                <select data-control="PanchangMonth">
                    <option value="‡§ö‡•à‡§§‡•ç‡§∞" selected>‡§ö‡•à‡§§‡•ç‡§∞</option><option value="‡§µ‡•à‡§∂‡§æ‡§ñ">‡§µ‡•à‡§∂‡§æ‡§ñ</option>
                    <option value="‡§ú‡•ç‡§Ø‡•á‡§∑‡•ç‡§†">‡§ú‡•ç‡§Ø‡•á‡§∑‡•ç‡§†</option><option value="‡§Ü‡§∑‡§æ‡§¢">‡§Ü‡§∑‡§æ‡§¢</option>
                    <option value="‡§∂‡•ç‡§∞‡§æ‡§µ‡§£">‡§∂‡•ç‡§∞‡§æ‡§µ‡§£</option><option value="‡§≠‡§æ‡§¶‡•ç‡§∞‡§™‡§¶">‡§≠‡§æ‡§¶‡•ç‡§∞‡§™‡§¶</option>
                    <option value="‡§Ü‡§∂‡•ç‡§µ‡§ø‡§®">‡§Ü‡§∂‡•ç‡§µ‡§ø‡§®</option><option value="‡§ï‡§æ‡§∞‡•ç‡§§‡§ø‡§ï">‡§ï‡§æ‡§∞‡•ç‡§§‡§ø‡§ï</option>
                    <option value="‡§Æ‡§æ‡§∞‡•ç‡§ó‡§∂‡•Ä‡§∞‡•ç‡§∑">‡§Æ‡§æ‡§∞‡•ç‡§ó‡§∂‡•Ä‡§∞‡•ç‡§∑</option><option value="‡§™‡•å‡§∑">‡§™‡•å‡§∑</option>
                    <option value="‡§Æ‡§æ‡§ò">‡§Æ‡§æ‡§ò</option><option value="‡§´‡§æ‡§≤‡•ç‡§ó‡•Å‡§®">‡§´‡§æ‡§≤‡•ç‡§ó‡•Å‡§®</option>
                </select>
            </div>
            <div class="form-group" style="margin-bottom: 0; flex: 1;">
                <label>‡§µ‡§∞‡•ç‡§∑</label>
                <input type="number" data-control="PanchangYear" value="2055">
            </div>
        </div>

        <div id="dynamicControls"></div>

        <div id="planetControls"></div>

        <h2 style="margin-top: 15px; border-bottom: 1px solid #455A64; padding-bottom: 10px;">‡§∞‡§æ‡§∂‡•Ä ‡§∞‡§§‡•ç‡§® (Gemstone)</h2>
        <div id="ratnaControl"></div>

        <h2 style="margin-top: 15px; border-bottom: 1px solid #455A64; padding-bottom: 10px;">‡§Æ‡§π‡§æ‡§¶‡§∂‡§æ (Page 2)</h2>
        <div class="form-group">
            <label>‡§ó‡•ç‡§∞‡§π (Planet)</label>
            <select id="dashaPlanetInput">
                <option value="‡§∏‡•Ç‡§∞‡•ç‡§Ø">‡§∏‡•Ç‡§∞‡•ç‡§Ø</option><option value="‡§ö‡§®‡•ç‡§¶‡•ç‡§∞">‡§ö‡§®‡•ç‡§¶‡•ç‡§∞</option><option value="‡§Æ‡§Ç‡§ó‡§≤">‡§Æ‡§Ç‡§ó‡§≤</option>
                <option value="‡§¨‡•Å‡§ß" selected>‡§¨‡•Å‡§ß</option><option value="‡§ó‡•Å‡§∞‡•Å">‡§ó‡•Å‡§∞‡•Å</option><option value="‡§∂‡•Å‡§ï‡•ç‡§∞">‡§∂‡•Å‡§ï‡•ç‡§∞</option>
                <option value="‡§∂‡§®‡§ø">‡§∂‡§®‡§ø</option><option value="‡§∞‡§æ‡§π‡•Ç">‡§∞‡§æ‡§π‡•Ç</option><option value="‡§ï‡•á‡§§‡•Å">‡§ï‡•á‡§§‡•Å</option>
            </select>
        </div>
        <div class="form-group"><label>‡§∏‡•Å‡§∞‡•Å‡§µ‡§æ‡§§ (Start Date)</label><input type="date" id="dashaStartInput"></div>
        <div class="form-group"><label>‡§∂‡•á‡§µ‡§ü (End Date)</label><input type="date" id="dashaEndInput"></div>
        
        <button class="btn-add" onclick="addDashaRow()">+ ‡§ú‡•ã‡§°‡§æ (Add Dasha)</button>
        <button class="btn-undo" onclick="removeLastDashaRow()">- ‡§∂‡•á‡§µ‡§ü‡§ö‡•Ä ‡§ì‡§≥ ‡§ï‡§æ‡§¢‡§æ</button>
        <button class="btn-clear" onclick="clearDashaRows()">‡§∏‡§∞‡•ç‡§µ ‡§ï‡§æ‡§¢‡§æ</button>

        <h2 style="margin-top: 15px; border-bottom: 1px solid #455A64; padding-bottom: 10px;">‡§∂‡§æ‡§Ç‡§§‡•Ä ‡§™‡•Ç‡§ú‡§®</h2>
        <div class="checkbox-list" id="poojaChecklist">
        </div>

        <h2 style="margin-top: 15px; border-bottom: 1px solid #455A64; padding-bottom: 10px;">‡§Æ‡§Ç‡§§‡•ç‡§∞ ‡§â‡§™‡§æ‡§∏‡§®‡§æ</h2>
        <div class="checkbox-list" id="mantraChecklist">
        </div>

        <h2 style="margin-top: 15px; border-bottom: 1px solid #455A64; padding-bottom: 10px;">‡§´‡§≤‡§∂‡•ç‡§∞‡•Å‡§§‡•Ä (Page 3)</h2>
        <div class="form-group">
            <label>‡§Ø‡•á‡§•‡•á ‡§ü‡§æ‡§à‡§™ ‡§ï‡§∞‡§æ (Type here):</label>
            <textarea id="falaShrutiSidebarInput" placeholder="‡§Ø‡•á‡§•‡•á ‡§´‡§≤‡§∂‡•ç‡§∞‡•Å‡§§‡•Ä ‡§ü‡§æ‡§à‡§™ ‡§ï‡§∞‡§æ..."></textarea>
        </div>

        <button class="print-btn" onclick="window.print()">Print / Save PDF</button>
    </aside>

    <main class="main-workspace">
        
        <div class="page-container">
            <header class="page-header">
                <div class="header-title">
                    <h1 class="main-heading">‡§ï‡•Å‡§Ç‡§°‡§≤‡•Ä <span class="client-name-bind">Amey Hatekar</span></h1>
                </div>
                <div class="header-contact">
                    <div class="logo-area"><span class="swastik"><img class="logo" src="./assets/Logos/SwaminiLogo.png" alt=""></span> ‡§∏‡•ç‡§µ‡§æ‡§Æ‡§ø‡§®‡•Ä ‡§ú‡•ç‡§Ø‡•ã‡§§‡§ø‡§∑ ‡§ï‡§æ‡§∞‡•ç‡§Ø‡§æ‡§≤‡§Ø</div>
                    <div class="contact-details">
                        <strong>‡§ú‡•ç‡§Ø‡•ã‡§§‡§ø‡§∑: ‡§Ø‡•ã‡§ó‡•á‡§∂ ‡§â‡§Ç‡§¨‡§∞‡§ï‡§∞</strong><br>
                        <strong>‡§Æ‡•ã.:</strong> 9850254914 | <strong>‡§à‡§Æ‡•á‡§≤:</strong> swaminijyotishkendra@gmail.com
                    </div>
                </div>
            </header>

            <div class="box info-box">
                <div class="info-row-1">
                    ‡§®‡§æ‡§Æ: <strong class="client-name-bind">Amey Hatekar</strong> 
                    ‡§∏‡•ç‡§•‡§æ‡§®: <strong id="infoPlaceDisplay">Amravati, India</strong> (Lat: <span id="latDisplay">20.93</span> , Lon: <span id="lonDisplay">77.75</span>)
                </div>
                <div class="info-row-2" id="infoDateTimeDisplay">
                    25 ‡§è‡§™‡•ç‡§∞‡§ø 1998, ‡§∂‡§®‡§ø‡§µ‡§æ‡§∞, 09:09 AM
                </div>
            </div>

            <div class="box summary-box">
                <div class="summary-item">
                    <div class="rashi-title">‡§∞‡§æ‡§∂‡§ø ‚ôì <span data-bind="Rashi">‡§Æ‡•Ä‡§®</span></div>
                    <div class="lagna-title">‡§≤‡§ó‡•ç‡§® ‚ôä <span data-bind="Lagna">‡§Æ‡§ø‡§•‡•Å‡§®</span></div>
                </div>
                <div class="summary-item summary-center">
                    <h3>‡§®‡§æ‡§Æ <span id="naamAksharDisplay">‡§¶‡•ã..</span></h3>
                    <p>‡§¶‡§∂‡§æ ‡§≠‡•ã‡§ó‡•ç‡§Ø <span id="bhogyaPlanetDisplay">‡§¨‡•Å‡§ß</span> <span id="bhogyaYDisplay">10</span>y <span id="bhogyaMDisplay">3</span>m <span id="bhogyaDDisplay">13</span>d</p>
                </div>
                <div class="summary-item">
                    <span id="mangalDoshDisplay" class="mangal-dosh" style="color: var(--text-dark);">‡§Æ‡§Ç‡§ó‡§≥ ‡§¶‡•ã‡§∑ ‡§®‡§æ‡§π‡•Ä</span>
                </div>
            </div>

            <div class="details-grid">
                <div class="box detail-card">
                    <table class="detail-table">
                        <tr><td>‡§∞‡§æ‡§∂‡§ø ‡§∏‡•ç‡§µ‡§æ‡§Æ‡•Ä</td><td data-bind="RashiSwami">‡§ó‡•Å‡§∞‡•Å</td></tr>
                        <tr><td>‡§®‡§ï‡•ç‡§∑‡§§‡•ç‡§∞ ‡§∏‡•ç‡§µ‡§æ‡§Æ‡•Ä</td><td data-bind="NakshatraSwami">‡§¨‡•Å‡§ß</td></tr>
                        <tr><td>‡§®‡§ï‡•ç‡§∑‡§§‡•ç‡§∞ ‡§™‡§æ‡§Ø‡§æ</td><td data-bind="NakshtraPaya">‡§∏‡•Å‡§µ‡§∞‡•ç‡§£</td></tr>
                        <tr><td>‡§Ø‡•ã‡§®‡§ø</td><td data-bind="Yoni">‡§ó‡§ú</td></tr>
                        <tr><td>‡§ó‡§£</td><td data-bind="Gan">‡§¶‡•á‡§µ</td></tr>
                        <tr><td>‡§®‡§æ‡§°‡•Ä</td><td data-bind="Naadi">‡§Ö‡§®‡•ç‡§§‡•ç‡§Ø (‡§ï‡§´)</td></tr>
                        <tr><td>‡§µ‡§∞‡•ç‡§£</td><td data-bind="Varna">‡§¨‡•ç‡§∞‡§æ‡§π‡•ç‡§Æ‡§£</td></tr>
                    </table>
                </div>
                <div class="box detail-card">
                    <table class="detail-table">
                        <tr><td>‡§§‡§ø‡§•‡§ø</td><td data-bind="Tithi">‡§ö‡§§‡•Å‡§∞‡•ç‡§¶‡§∂‡•Ä, ‡§ï‡•É‡§∑‡•ç‡§£</td></tr>
                        <tr><td>‡§®‡§ï‡•ç‡§∑‡§§‡•ç‡§∞, ‡§™‡§¶</td><td data-bind="NakshatraPada">‡§∞‡•á‡§µ‡§§‡•Ä 2 ‡§¶‡•ã</td></tr>
                        <tr><td>‡§Ø‡•ã‡§ó</td><td data-bind="Yog">‡§µ‡§ø‡§∑‡•ç‡§ï‡•Å‡§Æ‡•ç‡§≠</td></tr>
                        <tr><td>‡§ï‡§∞‡§£</td><td data-bind="Karan">‡§µ‡§ø‡§∑‡•ç‡§ü‡§ø ‡§≠‡§¶‡•ç‡§∞</td></tr>
                        <tr><td>‡§á‡§∑‡•ç‡§ü‡§ï‡§æ‡§≤</td><td data-bind="IshtKaal">08:07:05</td></tr>
                        <tr><td>‡§∏‡•Ç‡§∞‡•ç‡§Ø‡•ã‡§¶‡§Ø</td><td data-bind="Suryoday">05:54</td></tr>
                        <tr><td></td><td><span data-bind="PanchangDay">‡§∂‡§®‡§ø‡§µ‡§æ‡§∞</span>, <span data-bind="PanchangMonth">‡§ö‡•à‡§§‡•ç‡§∞</span>, <span data-bind="PanchangYear">2055</span> ‡§µ‡§ø‡§ï‡•ç‡§∞‡§Æ ‡§∏‡§Ç‡§µ‡§§</td></tr>
                    </table>
                </div>
            </div>

            <div class="box main-content">
                <div class="chart-container">
                    <svg class="svg-chart" viewBox="0 0 300 300" preserveAspectRatio="xMidYMid meet">
                        <rect x="0" y="0" width="300" height="300" class="chart-lines"/>
                        <line x1="0" y1="0" x2="300" y2="300" class="chart-lines"/>
                        <line x1="300" y1="0" x2="0" y2="300" class="chart-lines"/>
                        <polygon points="150,0 300,150 150,300 0,150" class="chart-lines"/>
                        
                        <text x="150" y="25" text-anchor="middle" class="chart-num">3</text>  <text x="65" y="25" text-anchor="middle" class="chart-num">4</text>   <text x="25" y="65" text-anchor="middle" class="chart-num">5</text>   <text x="40" y="155" text-anchor="middle" class="chart-num">6</text>  <text x="25" y="245" text-anchor="middle" class="chart-num">7</text>  <text x="65" y="285" text-anchor="middle" class="chart-num">8</text>  <text x="150" y="285" text-anchor="middle" class="chart-num">9</text> <text x="235" y="285" text-anchor="middle" class="chart-num">10</text> <text x="275" y="245" text-anchor="middle" class="chart-num">11</text> <text x="260" y="155" text-anchor="middle" class="chart-num">12</text> <text x="275" y="65" text-anchor="middle" class="chart-num">1</text>  <text x="235" y="25" text-anchor="middle" class="chart-num">2</text>  <g id="chart-planets-container">
                            </g>
                    </svg>
                </div>

                <div class="planet-table-section">
                    <h3>‡§≤‡§ó‡•ç‡§® ‡§ï‡•Å‡§Ç‡§°‡§≤‡•Ä</h3>
                    <table class="planet-table">
                        <tr><th>‡§ó‡•ç‡§∞‡§π</th><th>‡§∞‡§æ‡§∂‡§ø ‡§®‡§ø‡§∞‡§æ‡§Ø‡§£</th><th>‡§Ö‡§Ç‡§∂, ‡§ï‡§≤‡§æ</th></tr>
                        <tr><td><span class="planet-dot dot-sun"></span> ‡§∏‡•Ç‡§∞‡•ç‡§Ø<span class="planet-suffix" data-suffix="‡§∏‡•Ç‡§∞‡•ç‡§Ø"></span></td><td data-bind="Rashi_‡§∏‡•Ç‡§∞‡•ç‡§Ø">‚ôà ‡§Æ‡•á‡§∑</td><td data-bind="Deg_‡§∏‡•Ç‡§∞‡•ç‡§Ø">00¬∞ 00'</td></tr>
                        <tr><td><span class="planet-dot dot-moon"></span> ‡§ö‡§®‡•ç‡§¶‡•ç‡§∞<span class="planet-suffix" data-suffix="‡§ö‡§®‡•ç‡§¶‡•ç‡§∞"></span></td><td data-bind="Rashi_‡§ö‡§®‡•ç‡§¶‡•ç‡§∞">‚ôì ‡§Æ‡•Ä‡§®</td><td data-bind="Deg_‡§ö‡§®‡•ç‡§¶‡•ç‡§∞">00¬∞ 00'</td></tr>
                        <tr><td><span class="planet-dot dot-mars"></span> ‡§Æ‡§Ç‡§ó‡§≤<span class="planet-suffix" data-suffix="‡§Æ‡§Ç‡§ó‡§≤"></span></td><td data-bind="Rashi_‡§Æ‡§Ç‡§ó‡§≤">‚ôà ‡§Æ‡•á‡§∑</td><td data-bind="Deg_‡§Æ‡§Ç‡§ó‡§≤">00¬∞ 00'</td></tr>
                        <tr><td><span class="planet-dot dot-merc"></span> ‡§¨‡•Å‡§ß<span class="planet-suffix" data-suffix="‡§¨‡•Å‡§ß"></span></td><td data-bind="Rashi_‡§¨‡•Å‡§ß">‚ôì ‡§Æ‡•Ä‡§®</td><td data-bind="Deg_‡§¨‡•Å‡§ß">00¬∞ 00'</td></tr>
                        <tr><td><span class="planet-dot dot-jup"></span> ‡§ó‡•Å‡§∞‡•Å<span class="planet-suffix" data-suffix="‡§ó‡•Å‡§∞‡•Å"></span></td><td data-bind="Rashi_‡§ó‡•Å‡§∞‡•Å">‚ôí ‡§ï‡•Å‡§Æ‡•ç‡§≠</td><td data-bind="Deg_‡§ó‡•Å‡§∞‡•Å">00¬∞ 00'</td></tr>
                        <tr><td><span class="planet-dot dot-ven"></span> ‡§∂‡•Å‡§ï‡•ç‡§∞<span class="planet-suffix" data-suffix="‡§∂‡•Å‡§ï‡•ç‡§∞"></span></td><td data-bind="Rashi_‡§∂‡•Å‡§ï‡•ç‡§∞">‚ôí ‡§ï‡•Å‡§Æ‡•ç‡§≠</td><td data-bind="Deg_‡§∂‡•Å‡§ï‡•ç‡§∞">00¬∞ 00'</td></tr>
                        <tr><td><span class="planet-dot dot-sat"></span> ‡§∂‡§®‡§ø<span class="planet-suffix" data-suffix="‡§∂‡§®‡§ø"></span></td><td data-bind="Rashi_‡§∂‡§®‡§ø">‚ôà ‡§Æ‡•á‡§∑</td><td data-bind="Deg_‡§∂‡§®‡§ø">00¬∞ 00'</td></tr>
                        <tr><td><span class="planet-dot dot-node">‚òä</span> ‡§∞‡§æ‡§π‡•Ç<span class="planet-suffix" data-suffix="‡§∞‡§æ‡§π‡•Ç"></span></td><td data-bind="Rashi_‡§∞‡§æ‡§π‡•Ç">‚ôå ‡§∏‡§ø‡§Ç‡§π</td><td data-bind="Deg_‡§∞‡§æ‡§π‡•Ç">00¬∞ 00'</td></tr>
                        <tr><td><span class="planet-dot dot-node">‚òã</span> ‡§ï‡•á‡§§‡•Å<span class="planet-suffix" data-suffix="‡§ï‡•á‡§§‡•Å"></span></td><td data-bind="Rashi_‡§ï‡•á‡§§‡•Å">‚ôí ‡§ï‡•Å‡§Æ‡•ç‡§≠</td><td data-bind="Deg_‡§ï‡•á‡§§‡•Å">00¬∞ 00'</td></tr>
                        <tr><td><span class="planet-dot dot-node">‚ôÖ</span> ‡§π‡§∞‡•ç‡§∂‡§≤<span class="planet-suffix" data-suffix="‡§π‡§∞‡•ç‡§∂‡§≤"></span></td><td data-bind="Rashi_‡§π‡§∞‡•ç‡§∂‡§≤">‚ôí ‡§ï‡•Å‡§Æ‡•ç‡§≠</td><td data-bind="Deg_‡§π‡§∞‡•ç‡§∂‡§≤">00¬∞ 00'</td></tr>
                        <tr><td><span class="planet-dot dot-node">‚ôÜ</span> ‡§®‡•á‡§™‡§ö‡•ç‡§Ø‡•Ç‡§®<span class="planet-suffix" data-suffix="‡§®‡•á‡§™‡§ö‡•ç‡§Ø‡•Ç‡§®"></span></td><td data-bind="Rashi_‡§®‡•á‡§™‡§ö‡•ç‡§Ø‡•Ç‡§®">‚ôë ‡§Æ‡§ï‡§∞</td><td data-bind="Deg_‡§®‡•á‡§™‡§ö‡•ç‡§Ø‡•Ç‡§®">00¬∞ 00'</td></tr>
                        <tr><td><span class="planet-dot dot-node">‚ôá</span> ‡§™‡•ç‡§≤‡•Ç‡§ü‡•ã<span class="planet-suffix" data-suffix="‡§™‡•ç‡§≤‡•Ç‡§ü‡•ã"></span></td><td data-bind="Rashi_‡§™‡•ç‡§≤‡•Ç‡§ü‡•ã">‚ôê ‡§ß‡§®‡•Å</td><td data-bind="Deg_‡§™‡•ç‡§≤‡•Ç‡§ü‡•ã">00¬∞ 00'</td></tr>
                    </table>
                </div>
            </div>
        </div>

        <div class="page-container page-2">
            <header class="page-header">
                <div class="header-title">
                    <h1 class="main-heading">‡§Æ‡§π‡§æ‡§¶‡§∂‡§æ ‡§µ ‡§™‡•Ç‡§ú‡§® <span class="client-name-bind">Amey Hatekar</span></h1>
                </div>
                <div class="header-contact">
                    <div class="logo-area"><span class="swastik">Âçê</span> ‡§∏‡•ç‡§µ‡§æ‡§Æ‡§ø‡§®‡•Ä ‡§ú‡•ç‡§Ø‡•ã‡§§‡§ø‡§∑ ‡§ï‡§æ‡§∞‡•ç‡§Ø‡§æ‡§≤‡§Ø</div>
                    <div class="contact-details">
                        <strong>‡§ú‡•ç‡§Ø‡•ã‡§§‡§ø‡§∑: ‡§Ø‡•ã‡§ó‡•á‡§∂ ‡§â‡§Ç‡§¨‡§∞‡§ï‡§∞</strong><br>
                        <strong>‡§Æ‡•ã.:</strong> 9850254914 | <strong>‡§à‡§Æ‡•á‡§≤:</strong> swaminijyotishkendra@gmail.com
                    </div>
                </div>
            </header>

            <div id="page2Grid" style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; align-items: start;">
                
                <div class="box" style="padding: 0; overflow: hidden;">
                    <h3 class="page-2-header">‡§µ‡§ø‡§Ç‡§∂‡•ã‡§§‡•ç‡§§‡§∞‡•Ä ‡§Æ‡§π‡§æ‡§¶‡§∂‡§æ</h3>
                    <table style="width: 100%; border-collapse: collapse;">
                        <tbody id="dashaTableBody"></tbody>
                    </table>
                </div>

                <div style="display: flex; flex-direction: column; gap: 15px;">
                    <div class="box ratna-box">
                        <h3 style="color: var(--primary-blue); margin-top: 0; margin-bottom: 8px; font-size: 18px;">‡§§‡•Å‡§Æ‡§ö‡•ç‡§Ø‡§æ‡§∏‡§æ‡§†‡•Ä ‡§â‡§™‡§Ø‡•Å‡§ï‡•ç‡§§ ‡§∞‡§§‡•ç‡§®</h3>
                        <div style="font-size: 20px; font-weight: bold; color: var(--accent-green); line-height: 1.3;" data-bind="RashiRatna">
                            ‡§Æ‡•Ç‡§Ç‡§ó‡§æ (Red Coral)
                        </div>
                    </div>

                    <div class="box" id="poojaBox" style="padding: 0; overflow: hidden; display: none;">
                        <h3 class="page-2-header" style="background-color: #F47A20;">‡§Ü‡§µ‡§∂‡•ç‡§Ø‡§ï ‡§∂‡§æ‡§Ç‡§§‡•Ä ‡§™‡•Ç‡§ú‡§®</h3>
                        <div id="poojaGrid" style="display: grid; grid-template-columns: 1fr 1fr; gap: 6px 15px; padding: 12px 15px;">
                        </div>
                    </div>
                </div>
            </div>

            <div class="box" id="mantraBox" style="padding: 0; overflow: hidden; margin-top: 15px; display: none;">
                <h3 class="page-2-header" style="background-color: #187A22;">‡§Æ‡§Ç‡§§‡•ç‡§∞ ‡§â‡§™‡§æ‡§∏‡§®‡§æ</h3>
                <div style="padding: 8px 15px; font-size: 12px; color: var(--text-dark); background: #fdfdfd; border-bottom: 1px solid var(--border-color); line-height: 1.4;">
                    <strong style="color: var(--primary-blue);">‡§ü‡§ø‡§™ :</strong> ‡§ñ‡§æ‡§≤‡•Ä ‡§¶‡§ø‡§≤‡•á‡§≤‡•á ‡§Æ‡§Ç‡§§‡•ç‡§∞ ‡§π‡•á ‡§ï‡•ã‡§£‡§§‡•ç‡§Ø‡§æ‡§π‡•Ä ‡§Æ‡§π‡§ø‡§®‡•ç‡§Ø‡§æ‡§ö‡•ç‡§Ø‡§æ ‡§Ö‡§Æ‡§æ‡§µ‡§∂‡•ç‡§Ø‡•á ‡§®‡§Ç‡§§‡§∞ ‡§§‡•ç‡§Ø‡§æ ‡§§‡•ç‡§Ø‡§æ ‡§ó‡•ç‡§∞‡§π‡§æ‡§ö‡•ç‡§Ø‡§æ ‡§†‡§∞‡§æ‡§µ‡§ø‡§ï ‡§¶‡§ø‡§µ‡§∏‡§æ ‡§™‡§æ‡§∏‡•Ç‡§® ‡§∏‡•Å‡§∞‡•Å ‡§ï‡§∞‡•Ç ‡§∂‡§ï‡§§‡§æ, ‡§§‡•ç‡§Ø‡§æ‡§ï‡§∞‡§ø‡§§‡§æ ‡§∞‡•Å‡§¶‡•ç‡§∞‡§æ‡§ï‡•ç‡§∑ ‡§ú‡§™‡§Æ‡§æ‡§≥, ‡§§‡§æ‡§Ç‡§¨‡•ç‡§Ø‡§æ‡§ö‡§æ ‡§¶‡§ø‡§µ‡§æ ‡§§‡•ç‡§Ø‡§æ ‡§Æ‡§ß‡•ç‡§Ø‡•á ‡§∂‡•Å‡§¶‡•ç‡§ß ‡§ó‡§æ‡§Ø‡§ö‡•á ‡§§‡•Ç‡§™ ‡§á‡§§‡•ç‡§Ø‡§æ‡§¶‡•Ä ‡§∏‡§æ‡§π‡§ø‡§§‡•ç‡§Ø ‡§Ü‡§µ‡§∂‡•ç‡§Ø‡§ï ‡§Ü‡§π‡•á.
                </div>
                <table style="width: 100%; border-collapse: collapse;">
                    <tbody id="mantraTableBody"></tbody>
                </table>
            </div>
        </div>

        <div class="page-container page-3">
            <header class="page-header">
                <div class="header-title">
                    <h1 class="main-heading">‡§´‡§≤‡§∂‡•ç‡§∞‡•Å‡§§‡•Ä <span class="client-name-bind">Amey Hatekar</span></h1>
                </div>
                <div class="header-contact">
                    <div class="logo-area"><span class="swastik">Âçê</span> ‡§∏‡•ç‡§µ‡§æ‡§Æ‡§ø‡§®‡•Ä ‡§ú‡•ç‡§Ø‡•ã‡§§‡§ø‡§∑ ‡§ï‡§æ‡§∞‡•ç‡§Ø‡§æ‡§≤‡§Ø</div>
                    <div class="contact-details">
                        <strong>‡§ú‡•ç‡§Ø‡•ã‡§§‡§ø‡§∑: ‡§Ø‡•ã‡§ó‡•á‡§∂ ‡§â‡§Ç‡§¨‡§∞‡§ï‡§∞</strong><br>
                        <strong>‡§Æ‡•ã.:</strong> 9850254914 | <strong>‡§à‡§Æ‡•á‡§≤:</strong> swaminijyotishkendra@gmail.com
                    </div>
                </div>
            </header>

            <div class="box" style="padding: 0;">
                <div id="falaShrutiDisplay" class="editable-textarea" contenteditable="true" spellcheck="false" data-placeholder="‡§Ø‡•á‡§•‡•á ‡§´‡§≤‡§∂‡•ç‡§∞‡•Å‡§§‡•Ä ‡§ü‡§æ‡§à‡§™ ‡§ï‡§∞‡§æ (Click here to type)..."></div>
            </div>
        </div>

    </main>

    <script>
        // --- Number Conversion Utility (Force English Digits) ---
        const toEnglishDigits = str => {
            const map = {'‡•¶':'0','‡•ß':'1','‡•®':'2','‡•©':'3','‡•™':'4','‡•´':'5','‡•¨':'6','‡•≠':'7','‡•Æ':'8','‡•Ø':'9'};
            return str.replace(/[‡•¶-‡•Ø]/g, m => map[m]);
        };

        // --- Core Application Data ---
        const rashiMap = {"‡§Æ‡•á‡§∑": 1, "‡§µ‡•É‡§∑‡§≠": 2, "‡§Æ‡§ø‡§•‡•Å‡§®": 3, "‡§ï‡§∞‡•ç‡§ï": 4, "‡§∏‡§ø‡§Ç‡§π": 5, "‡§ï‡§®‡•ç‡§Ø‡§æ": 6, "‡§§‡•Å‡§≤‡§æ": 7, "‡§µ‡•É‡§∂‡•ç‡§ö‡§ø‡§ï": 8, "‡§ß‡§®‡•Å": 9, "‡§Æ‡§ï‡§∞": 10, "‡§ï‡•Å‡§Ç‡§≠": 11, "‡§Æ‡•Ä‡§®": 12};
        const rashiSymbols = ["‚ôà ‡§Æ‡•á‡§∑", "‚ôâ ‡§µ‡•É‡§∑‡§≠", "‚ôä ‡§Æ‡§ø‡§•‡•Å‡§®", "‚ôã ‡§ï‡§∞‡•ç‡§ï", "‚ôå ‡§∏‡§ø‡§Ç‡§π", "‚ôç ‡§ï‡§®‡•ç‡§Ø‡§æ", "‚ôé ‡§§‡•Å‡§≤‡§æ", "‚ôè ‡§µ‡•É‡§∂‡•ç‡§ö‡§ø‡§ï", "‚ôê ‡§ß‡§®‡•Å", "‚ôë ‡§Æ‡§ï‡§∞", "‚ôí ‡§ï‡•Å‡§Ç‡§≠", "‚ôì ‡§Æ‡•Ä‡§®"];
        const planetsList = [
            { id: "‡§∏‡•Ç‡§∞‡•ç‡§Ø", default: "‚ôà ‡§Æ‡•á‡§∑" }, { id: "‡§ö‡§®‡•ç‡§¶‡•ç‡§∞", default: "‚ôì ‡§Æ‡•Ä‡§®" }, { id: "‡§Æ‡§Ç‡§ó‡§≤", default: "‚ôà ‡§Æ‡•á‡§∑" },
            { id: "‡§¨‡•Å‡§ß", default: "‚ôì ‡§Æ‡•Ä‡§®" }, { id: "‡§ó‡•Å‡§∞‡•Å", default: "‚ôí ‡§ï‡•Å‡§Æ‡•ç‡§≠" }, { id: "‡§∂‡•Å‡§ï‡•ç‡§∞", default: "‚ôí ‡§ï‡•Å‡§Æ‡•ç‡§≠" },
            { id: "‡§∂‡§®‡§ø", default: "‚ôà ‡§Æ‡•á‡§∑" }, { id: "‡§∞‡§æ‡§π‡•Ç", default: "‚ôå ‡§∏‡§ø‡§Ç‡§π" }, { id: "‡§ï‡•á‡§§‡•Å", default: "‚ôí ‡§ï‡•Å‡§Æ‡•ç‡§≠" },
            { id: "‡§π‡§∞‡•ç‡§∂‡§≤", default: "‚ôí ‡§ï‡•Å‡§Æ‡•ç‡§≠" }, { id: "‡§®‡•á‡§™‡§ö‡•ç‡§Ø‡•Ç‡§®", default: "‚ôë ‡§Æ‡§ï‡§∞" }, { id: "‡§™‡•ç‡§≤‡•Ç‡§ü‡•ã", default: "‚ôê ‡§ß‡§®‡•Å" }
        ];
        const houseCoords = {
            1: {x: 150, y: 75}, 2: {x: 75, y: 45}, 3: {x: 45, y: 95}, 4: {x: 80, y: 155},
            5: {x: 45, y: 215}, 6: {x: 75, y: 265}, 7: {x: 150, y: 230}, 8: {x: 225, y: 265},
            9: {x: 255, y: 215}, 10: {x: 220, y: 155}, 11: {x: 255, y: 95}, 12: {x: 225, y: 45}
        };

        // --- SVG Chart Master Update Function ---
        function updateChart() {
            const lagnaSelect = document.querySelector('[data-control="Lagna"]');
            if(!lagnaSelect) return;
            
            // 1. Update House Numbers based on Lagna
            let lagnaNum = rashiMap[lagnaSelect.value];
            const numElements = document.querySelectorAll('.chart-num');
            numElements.forEach((el, index) => {
                let num = lagnaNum + index;
                if(num > 12) num -= 12;
                el.textContent = num;
            });

            // 2. Gather Planets based on Rashi & Calculate House
            let houses = { 1:[], 2:[], 3:[], 4:[], 5:[], 6:[], 7:[], 8:[], 9:[], 10:[], 11:[], 12:[] };
            
            // Always put '‡§≤‡§ó‡•ç‡§®' at the top of house 1
            houses[1].push('‡§≤‡§ó‡•ç‡§®');

            planetsList.forEach(p => {
                const rashiSelect = document.querySelector(`[data-control="Rashi_${p.id}"]`);
                if(!rashiSelect) return;
                
                // Extract pure Rashi name without the Symbol (e.g., "‚ôà ‡§Æ‡•á‡§∑" -> "‡§Æ‡•á‡§∑")
                let pureRashiName = rashiSelect.value.split(" ")[1] || rashiSelect.value;
                if(pureRashiName === "‡§ï‡•Å‡§Æ‡•ç‡§≠") pureRashiName = "‡§ï‡•Å‡§Ç‡§≠"; // Standardize spelling
                
                const rashiNum = rashiMap[pureRashiName];
                if(!rashiNum) return;

                let houseNum = (rashiNum - lagnaNum + 12) % 12 + 1;
                
                const isVakri = document.querySelector(`input[data-vakri="${p.id}"]`)?.checked || false;
                const isAsta = document.querySelector(`input[data-asta="${p.id}"]`)?.checked || false;
                let suffix = "";
                if(isVakri) suffix += "*";
                if(isAsta) suffix += "^";
                
                houses[houseNum].push(p.id + suffix);
            });

            // 3. Render Planet Text Elements inside the SVG
            const container = document.getElementById('chart-planets-container');
            container.innerHTML = ""; // Clear existing planets
            
            for(let h=1; h<=12; h++) {
                if(houses[h].length > 0) {
                    // Group planets by 2 per line for neatness
                    let lines = [];
                    for(let i=0; i<houses[h].length; i+=2) {
                        lines.push(houses[h].slice(i, i+2).join(' '));
                    }
                    
                    let textEl = document.createElementNS("http://www.w3.org/2000/svg", "text");
                    textEl.setAttribute("x", houseCoords[h].x);
                    // Shift starting Y up slightly if there are multiple lines
                    textEl.setAttribute("y", houseCoords[h].y - ((lines.length - 1) * 6)); 
                    textEl.setAttribute("text-anchor", "middle");
                    textEl.setAttribute("class", "chart-planet");
                    
                    lines.forEach((line, index) => {
                        let tspan = document.createElementNS("http://www.w3.org/2000/svg", "tspan");
                        tspan.setAttribute("x", houseCoords[h].x);
                        if(index > 0) tspan.setAttribute("dy", "14"); // Line spacing
                        tspan.textContent = line;
                        textEl.appendChild(tspan);
                    });
                    
                    container.appendChild(textEl);
                }
            }
        }

        // --- 1. Header & Basic Info Binding ---
        document.getElementById('clientNameInput').addEventListener('input', e => {
            const val = e.target.value || '______________';
            document.querySelectorAll('.client-name-bind').forEach(el => el.textContent = val);
        });
        
        document.getElementById('clientPlaceInput').addEventListener('input', e => document.getElementById('infoPlaceDisplay').textContent = e.target.value || '______________');
        document.getElementById('clientLatInput').addEventListener('input', e => document.getElementById('latDisplay').textContent = e.target.value || '0.00');
        document.getElementById('clientLonInput').addEventListener('input', e => document.getElementById('lonDisplay').textContent = e.target.value || '0.00');

        const updateDateTime = () => {
            const d = document.getElementById('clientDateInput').value, t = document.getElementById('clientTimeInput').value;
            if(!d) return;
            
            let formattedDate = new Intl.DateTimeFormat('mr-IN', { day: 'numeric', month: 'short', year: 'numeric', weekday: 'long' }).format(new Date(d));
            formattedDate = toEnglishDigits(formattedDate);
            
            let fTime = "";
            if(t) {
                let [h, m] = t.split(':');
                let ampm = h >= 12 ? 'PM' : 'AM';
                h = h % 12 || 12;
                fTime = `, ${h.toString().padStart(2, '0')}:${m} ${ampm}`;
            }
            document.getElementById('infoDateTimeDisplay').textContent = `${formattedDate}${fTime}`;
        };
        document.getElementById('clientDateInput').addEventListener('input', updateDateTime);
        document.getElementById('clientTimeInput').addEventListener('input', updateDateTime);
        updateDateTime();

        // --- Dasha Bhogya & Mangal Dosh Logic ---
        document.getElementById('bhogyaPlanetInput').addEventListener('input', e => document.getElementById('bhogyaPlanetDisplay').textContent = e.target.value);
        document.getElementById('bhogyaYInput').addEventListener('input', e => document.getElementById('bhogyaYDisplay').textContent = e.target.value || '0');
        document.getElementById('bhogyaMInput').addEventListener('input', e => document.getElementById('bhogyaMDisplay').textContent = e.target.value || '0');
        document.getElementById('bhogyaDInput').addEventListener('input', e => document.getElementById('bhogyaDDisplay').textContent = e.target.value || '0');

        document.getElementById('mangalDoshInput').addEventListener('change', e => {
            const display = document.getElementById('mangalDoshDisplay');
            if(e.target.checked) {
                display.textContent = '‡§Æ‡§Ç‡§ó‡§≥ ‡§¶‡•ã‡§∑ ‡§Ü‡§π‡•á';
                display.style.color = '#dc3545'; 
            } else {
                display.textContent = '‡§Æ‡§Ç‡§ó‡§≥ ‡§¶‡•ã‡§∑ ‡§®‡§æ‡§π‡•Ä';
                display.style.color = 'var(--text-dark)'; 
            }
        });

        // --- 2. Dynamic Controls Generator ---
        const jyotishData = {
            Lagna: ["‡§Æ‡•á‡§∑", "‡§µ‡•É‡§∑‡§≠", "‡§Æ‡§ø‡§•‡•Å‡§®", "‡§ï‡§∞‡•ç‡§ï", "‡§∏‡§ø‡§Ç‡§π", "‡§ï‡§®‡•ç‡§Ø‡§æ", "‡§§‡•Å‡§≤‡§æ", "‡§µ‡•É‡§∂‡•ç‡§ö‡§ø‡§ï", "‡§ß‡§®‡•Å", "‡§Æ‡§ï‡§∞", "‡§ï‡•Å‡§Ç‡§≠", "‡§Æ‡•Ä‡§®"],
            Rashi: ["‡§Æ‡•á‡§∑", "‡§µ‡•É‡§∑‡§≠", "‡§Æ‡§ø‡§•‡•Å‡§®", "‡§ï‡§∞‡•ç‡§ï", "‡§∏‡§ø‡§Ç‡§π", "‡§ï‡§®‡•ç‡§Ø‡§æ", "‡§§‡•Å‡§≤‡§æ", "‡§µ‡•É‡§∂‡•ç‡§ö‡§ø‡§ï", "‡§ß‡§®‡•Å", "‡§Æ‡§ï‡§∞", "‡§ï‡•Å‡§Ç‡§≠", "‡§Æ‡•Ä‡§®"],
            RashiSwami: ["‡§∏‡•Ç‡§∞‡•ç‡§Ø", "‡§ö‡§Ç‡§¶‡•ç‡§∞", "‡§Æ‡§Ç‡§ó‡§≥", "‡§¨‡•Å‡§ß", "‡§ó‡•Å‡§∞‡•Å", "‡§∂‡•Å‡§ï‡•ç‡§∞", "‡§∂‡§®‡§ø", "‡§∞‡§æ‡§π‡•Ç", "‡§ï‡•á‡§§‡•Ç"],
            NakshatraSwami: ["‡§∏‡•Ç‡§∞‡•ç‡§Ø", "‡§ö‡§Ç‡§¶‡•ç‡§∞", "‡§Æ‡§Ç‡§ó‡§≥", "‡§¨‡•Å‡§ß", "‡§ó‡•Å‡§∞‡•Å", "‡§∂‡•Å‡§ï‡•ç‡§∞", "‡§∂‡§®‡§ø", "‡§∞‡§æ‡§π‡•Ç", "‡§ï‡•á‡§§‡•Ç"],
            NakshtraPaya: ["‡§∏‡•Å‡§µ‡§∞‡•ç‡§£", "‡§∞‡§ú‡§§", "‡§§‡§æ‡§Æ‡•ç‡§∞", "‡§≤‡•ã‡§π"],
            Yoni: ["‡§Ö‡§∂‡•ç‡§µ", "‡§ó‡§ú", "‡§Æ‡•á‡§∑", "‡§∏‡§∞‡•ç‡§™", "‡§∂‡•ç‡§µ‡§æ‡§®", "‡§Æ‡§æ‡§∞‡•ç‡§ú‡§æ‡§∞", "‡§Æ‡•Ç‡§∑‡§ï", "‡§ó‡•å", "‡§Æ‡§π‡§ø‡§∑", "‡§µ‡•ç‡§Ø‡§æ‡§ò‡•ç‡§∞", "‡§Æ‡•É‡§ó", "‡§µ‡§æ‡§®‡§∞", "‡§®‡§ï‡•Å‡§≤", "‡§∏‡§ø‡§Ç‡§π"],
            Gan: ["‡§¶‡•á‡§µ", "‡§Æ‡§®‡•Å‡§∑‡•ç‡§Ø", "‡§∞‡§æ‡§ï‡•ç‡§∑‡§∏"],
            Naadi: ["‡§Ü‡§¶‡•ç‡§Ø (‡§µ‡§æ‡§§)", "‡§Æ‡§ß‡•ç‡§Ø (‡§™‡§ø‡§§‡•ç‡§§)", "‡§Ö‡§®‡•ç‡§§‡•ç‡§Ø (‡§ï‡§´)"],
            Varna: ["‡§¨‡•ç‡§∞‡§æ‡§π‡•ç‡§Æ‡§£", "‡§ï‡•ç‡§∑‡§§‡•ç‡§∞‡§ø‡§Ø", "‡§µ‡•à‡§∂‡•ç‡§Ø", "‡§∂‡•Ç‡§¶‡•ç‡§∞"],
            Tithi: ["‡§™‡•ç‡§∞‡§§‡§ø‡§™‡§¶‡§æ", "‡§¶‡•ç‡§µ‡§ø‡§§‡•Ä‡§Ø‡§æ", "‡§§‡•É‡§§‡•Ä‡§Ø‡§æ", "‡§ö‡§§‡•Å‡§∞‡•ç‡§•‡•Ä", "‡§™‡§Ç‡§ö‡§Æ‡•Ä", "‡§∑‡§∑‡•ç‡§†‡•Ä", "‡§∏‡§™‡•ç‡§§‡§Æ‡•Ä", "‡§Ö‡§∑‡•ç‡§ü‡§Æ‡•Ä", "‡§®‡§µ‡§Æ‡•Ä", "‡§¶‡§∂‡§Æ‡•Ä", "‡§è‡§ï‡§æ‡§¶‡§∂‡•Ä", "‡§¶‡•ç‡§µ‡§æ‡§¶‡§∂‡•Ä", "‡§§‡•ç‡§∞‡§Ø‡•ã‡§¶‡§∂‡•Ä", "‡§ö‡§§‡•Å‡§∞‡•ç‡§¶‡§∂‡•Ä", "‡§™‡•å‡§∞‡•ç‡§£‡§ø‡§Æ‡§æ", "‡§Ö‡§Æ‡§æ‡§µ‡§æ‡§∏‡•ç‡§Ø‡§æ"].flatMap(t=>[t+', ‡§∂‡•Å‡§ï‡•ç‡§≤', t+', ‡§ï‡•É‡§∑‡•ç‡§£']),
            NakshatraPada: [
                ["‡§Ö‡§∂‡•ç‡§µ‡§ø‡§®‡•Ä", ["‡§ö‡•Ç", "‡§ö‡•á", "‡§ö‡•ã", "‡§≤‡§æ"]], ["‡§≠‡§∞‡§£‡•Ä", ["‡§≤‡•Ä", "‡§≤‡•Ç", "‡§≤‡•á", "‡§≤‡•ã"]], ["‡§ï‡•É‡§§‡•ç‡§§‡§ø‡§ï‡§æ", ["‡§Ö", "‡§à", "‡§ä", "‡§è"]],
                ["‡§∞‡•ã‡§π‡§ø‡§£‡•Ä", ["‡§ì", "‡§µ‡§æ", "‡§µ‡•Ä", "‡§µ‡•Ç"]], ["‡§Æ‡•É‡§ó‡§∂‡•Ä‡§∞‡•ç‡§∑", ["‡§µ‡•á", "‡§µ‡•ã", "‡§ï‡§æ", "‡§ï‡•Ä"]], ["‡§Ü‡§∞‡•ç‡§¶‡•ç‡§∞‡§æ", ["‡§ï‡•Ç", "‡§ò", "‡§ô", "‡§õ"]],
                ["‡§™‡•Å‡§®‡§∞‡•ç‡§µ‡§∏‡•Å", ["‡§ï‡•á", "‡§ï‡•ã", "‡§π‡§æ", "‡§π‡•Ä"]], ["‡§™‡•Å‡§∑‡•ç‡§Ø", ["‡§π‡•Ç", "‡§π‡•á", "‡§π‡•ã", "‡§°‡§æ"]], ["‡§Ü‡§∂‡•ç‡§≤‡•á‡§∑‡§æ", ["‡§°‡•Ä", "‡§°‡•Ç", "‡§°‡•á", "‡§°‡•ã"]],
                ["‡§Æ‡§ò‡§æ", ["‡§Æ‡§æ", "‡§Æ‡•Ä", "‡§Æ‡•Ç", "‡§Æ‡•á"]], ["‡§™‡•Ç‡§∞‡•ç‡§µ‡§æ ‡§´‡§æ‡§≤‡•ç‡§ó‡•Å‡§®‡•Ä", ["‡§Æ‡•ã", "‡§ü‡§æ", "‡§ü‡•Ä", "‡§ü‡•Ç"]], ["‡§â‡§§‡•ç‡§§‡§∞‡§æ ‡§´‡§æ‡§≤‡•ç‡§ó‡•Å‡§®‡•Ä", ["‡§ü‡•á", "‡§ü‡•ã", "‡§™‡§æ", "‡§™‡•Ä"]],
                ["‡§π‡§∏‡•ç‡§§", ["‡§™‡•Ç", "‡§∑", "‡§£", "‡§†"]], ["‡§ö‡§ø‡§§‡•ç‡§∞‡§æ", ["‡§™‡•á", "‡§™‡•ã", "‡§∞‡§æ", "‡§∞‡•Ä"]], ["‡§∏‡•ç‡§µ‡§æ‡§§‡•Ä", ["‡§∞‡•Ç", "‡§∞‡•á", "‡§∞‡•ã", "‡§§‡§æ"]],
                ["‡§µ‡§ø‡§∂‡§æ‡§ñ‡§æ", ["‡§§‡•Ä", "‡§§‡•Ç", "‡§§‡•á", "‡§§‡•ã"]], ["‡§Ö‡§®‡•Å‡§∞‡§æ‡§ß‡§æ", ["‡§®‡§æ", "‡§®‡•Ä", "‡§®‡•Ç", "‡§®‡•á"]], ["‡§ú‡•ç‡§Ø‡•á‡§∑‡•ç‡§†‡§æ", ["‡§®‡•ã", "‡§Ø‡§æ", "‡§Ø‡•Ä", "‡§Ø‡•Ç"]],
                ["‡§Æ‡•Ç‡§≥", ["‡§Ø‡•á", "‡§Ø‡•ã", "‡§≠‡§æ", "‡§≠‡•Ä"]], ["‡§™‡•Ç‡§∞‡•ç‡§µ‡§æ‡§∑‡§æ‡§¢‡§æ", ["‡§≠‡•Ç", "‡§ß‡§æ", "‡§´‡§æ", "‡§¢‡§æ"]], ["‡§â‡§§‡•ç‡§§‡§∞‡§æ‡§∑‡§æ‡§¢‡§æ", ["‡§≠‡•á", "‡§≠‡•ã", "‡§ú‡§æ", "‡§ú‡•Ä"]],
                ["‡§∂‡•ç‡§∞‡§µ‡§£", ["‡§ñ‡•Ä", "‡§ñ‡•Ç", "‡§ñ‡•á", "‡§ñ‡•ã"]], ["‡§ß‡§®‡§ø‡§∑‡•ç‡§†‡§æ", ["‡§ó‡§æ", "‡§ó‡•Ä", "‡§ó‡•Ç", "‡§ó‡•á"]], ["‡§∂‡§§‡§§‡§æ‡§∞‡§ï‡§æ", ["‡§ó‡•ã", "‡§∏‡§æ", "‡§∏‡•Ä", "‡§∏‡•Ç"]],
                ["‡§™‡•Ç‡§∞‡•ç‡§µ‡§æ ‡§≠‡§æ‡§¶‡•ç‡§∞‡§™‡§¶‡§æ", ["‡§∏‡•á", "‡§∏‡•ã", "‡§¶‡§æ", "‡§¶‡•Ä"]], ["‡§â‡§§‡•ç‡§§‡§∞‡§æ ‡§≠‡§æ‡§¶‡•ç‡§∞‡§™‡§¶‡§æ", ["‡§¶‡•Ç", "‡§•", "‡§ù", "‡§û"]], ["‡§∞‡•á‡§µ‡§§‡•Ä", ["‡§¶‡•á", "‡§¶‡•ã", "‡§ö‡§æ", "‡§ö‡•Ä"]]
            ].flatMap(([n, letters]) => letters.map((l, i) => `${n}, ‡§™‡§¶ ${i + 1} (${l})`)),
            Yog: ["‡§µ‡§ø‡§∑‡•ç‡§ï‡•Å‡§Ç‡§≠", "‡§™‡•ç‡§∞‡•Ä‡§§‡§ø", "‡§Ü‡§Ø‡•Å‡§∑‡•ç‡§Æ‡§æ‡§®", "‡§∏‡•å‡§≠‡§æ‡§ó‡•ç‡§Ø", "‡§∂‡•ã‡§≠‡§®", "‡§Ö‡§§‡§ø‡§ó‡§Ç‡§°", "‡§∏‡•Å‡§ï‡§∞‡•ç‡§Æ‡§æ", "‡§ß‡•É‡§§‡§ø", "‡§∂‡•Ç‡§≤", "‡§ó‡§Ç‡§°", "‡§µ‡•É‡§¶‡•ç‡§ß‡§ø", "‡§ß‡•ç‡§∞‡•Å‡§µ", "‡§µ‡•ç‡§Ø‡§æ‡§ò‡§æ‡§§", "‡§π‡§∞‡•ç‡§∑‡§£", "‡§µ‡§ú‡•ç‡§∞", "‡§∏‡§ø‡§¶‡•ç‡§ß‡§ø", "‡§µ‡•ç‡§Ø‡§§‡•Ä‡§™‡§æ‡§§", "‡§µ‡§∞‡•Ä‡§Ø‡§æ‡§®", "‡§™‡§∞‡§ø‡§ò", "‡§∂‡§ø‡§µ", "‡§∏‡§ø‡§¶‡•ç‡§ß", "‡§∏‡§æ‡§ß‡•ç‡§Ø", "‡§∂‡•Å‡§≠", "‡§∂‡•Å‡§ï‡•ç‡§≤", "‡§¨‡•ç‡§∞‡§π‡•ç‡§Æ", "‡§ê‡§Ç‡§¶‡•ç‡§∞", "‡§µ‡•à‡§ß‡•É‡§§‡§ø"],
            Karan: ["‡§¨‡§µ", "‡§¨‡§æ‡§≤‡§µ", "‡§ï‡•å‡§≤‡§µ", "‡§§‡•à‡§§‡§ø‡§≤", "‡§ó‡§∞", "‡§µ‡§£‡§ø‡§ú", "‡§µ‡§ø‡§∑‡•ç‡§ü‡§ø (‡§≠‡§¶‡•ç‡§∞‡§æ)", "‡§∂‡§ï‡•Å‡§®‡§ø", "‡§ö‡§§‡•Å‡§∑‡•ç‡§™‡§æ‡§¶", "‡§®‡§æ‡§ó", "‡§ï‡§ø‡§Ç‡§∏‡•ç‡§§‡•Å‡§ò‡•ç‡§®"]
        };

        const extraTimers = { IshtKaal: { label: "‡§á‡§∑‡•ç‡§ü‡§ï‡§æ‡§≤", type: "time", step: "1" }, Suryoday: { label: "‡§∏‡•Ç‡§∞‡•ç‡§Ø‡•ã‡§¶‡§Ø", type: "time" } };
        
        const ratnaOptions = [
            { label: "‡§Æ‡•á‡§∑ (Aries)", stone: "‡§Æ‡•Ç‡§Ç‡§ó‡§æ (Red Coral)" }, { label: "‡§µ‡•É‡§∑‡§≠ (Taurus)", stone: "‡§™‡•Å‡§ñ‡§∞‡§æ‡§ú (Yellow Sapphire)" },
            { label: "‡§Æ‡§ø‡§•‡•Å‡§® (Gemini)", stone: "‡§Æ‡§∞‡§ï‡§∞‡•Ä / ‡§™‡§®‡•ç‡§®‡§æ (Emerald)" }, { label: "‡§ï‡§∞‡•ç‡§ï (Cancer)", stone: "‡§Æ‡•ã‡§§‡•Ä (Pearl)" },
            { label: "‡§∏‡§ø‡§Ç‡§π (Leo)", stone: "‡§Æ‡•Ç‡§Ç‡§ó‡§æ / ‡§™‡•Å‡§ñ‡§∞‡§æ‡§ú (Red Coral / Yellow Sapphire)" }, { label: "‡§ï‡§®‡•ç‡§Ø‡§æ (Virgo)", stone: "‡§™‡•Å‡§ñ‡§∞‡§æ‡§ú / ‡§®‡•Ä‡§≤‡§Æ (Yellow Sapphire / Blue Sapphire)" },
            { label: "‡§§‡•Å‡§≤‡§æ (Libra)", stone: "‡§π‡•Ä‡§∞‡§æ (Diamond)" }, { label: "‡§µ‡•É‡§∂‡•ç‡§ö‡§ø‡§ï (Scorpio)", stone: "‡§™‡•Å‡§ñ‡§∞‡§æ‡§ú / ‡§®‡•Ä‡§≤‡§Æ (Yellow Sapphire / Blue Sapphire)" },
            { label: "‡§ß‡§®‡•Å (Sagittarius)", stone: "‡§™‡•Å‡§ñ‡§∞‡§æ‡§ú (Yellow Sapphire)" }, { label: "‡§Æ‡§ï‡§∞ (Capricorn)", stone: "‡§®‡•Ä‡§≤‡§Æ (Blue Sapphire)" },
            { label: "‡§ï‡•Å‡§Ç‡§≠ (Aquarius)", stone: "‡§®‡•Ä‡§≤‡§Æ (Blue Sapphire)" }, { label: "‡§Æ‡•Ä‡§® (Pisces)", stone: "‡§™‡•Å‡§ñ‡§∞‡§æ‡§ú (Yellow Sapphire)" }
        ];

        const poojaList = [
            "üî¥ ‡§®‡§µ‡§ó‡•ç‡§∞‡§π ‡§∂‡§æ‡§Ç‡§§‡•Ä", "üìø ‡§ó‡•Å‡§∞‡•Å ‡§∂‡§æ‡§Ç‡§§‡•Ä", "ü™ê ‡§Æ‡§Ç‡§ó‡§≥ ‡§¶‡•ã‡§∑ ‡§∂‡§æ‡§Ç‡§§‡•Ä", "‚ö´ ‡§∂‡§®‡§ø ‡§∂‡§æ‡§Ç‡§§‡•Ä", "üåë ‡§∞‡§æ‡§π‡•Å-‡§ï‡•á‡§§‡•Å ‡§∂‡§æ‡§Ç‡§§‡•Ä",
            "üêç ‡§ï‡§æ‡§≤‡§∏‡§∞‡•ç‡§™ ‡§¶‡•ã‡§∑", "üë∂ ‡§™‡§ø‡§§‡•É ‡§¶‡•ã‡§∑ ‡§∂‡§æ‡§Ç‡§§‡•Ä", "‚ö™ ‡§§‡•ç‡§∞‡•Ä‡§™‡§ø‡§Ç‡§°‡•Ä ‡§∂‡•ç‡§∞‡§æ‡§¶‡•ç‡§ß", "üü° ‡§ö‡§æ‡§Ç‡§°‡§æ‡§≥ ‡§Ø‡•ã‡§ó ‡§∂‡§æ‡§Ç‡§§‡•Ä",
            "üåü ‡§®‡§ï‡•ç‡§∑‡§§‡•ç‡§∞ ‡§∂‡§æ‡§Ç‡§§‡•Ä", "üí∞ ‡§≤‡§ï‡•ç‡§∑‡•ç‡§Æ‡•Ä ‡§∂‡§æ‡§Ç‡§§‡•Ä", "üî± ‡§Æ‡§π‡§æ‡§Æ‡•É‡§§‡•ç‡§Ø‡•Å‡§Ç‡§ú‡§Ø ‡§ú‡§™", "üß≠ ‡§µ‡§æ‡§∏‡•ç‡§§‡•Å ‡§∂‡§æ‡§Ç‡§§‡•Ä", "üè∫ ‡§ï‡•Å‡§Ç‡§≠ ‡§µ‡§ø‡§µ‡§æ‡§π", "üî• ‡§®‡§µ‡§ö‡§Ç‡§°‡•Ä ‡§µ‡§ø‡§ß‡§æ‡§®"
        ];

        const mantraData = {
            "‡§∏‡•Ç‡§∞‡•ç‡§Ø": { name: "‚òÄÔ∏è ‡§∏‡•Ç‡§∞‡•ç‡§Ø", mantra: "‡•ê ‡§π‡•ç‡§∞‡§æ‡§Ç ‡§π‡•ç‡§∞‡•Ä‡§Ç ‡§π‡•ç‡§∞‡•å‡§Ç ‡§∏‡§É ‡§∏‡•Ç‡§∞‡•ç‡§Ø‡§æ‡§Ø ‡§®‡§Æ‡§É", count: "28,000" },
            "‡§ö‡§Ç‡§¶‡•ç‡§∞": { name: "üåô ‡§ö‡§Ç‡§¶‡•ç‡§∞", mantra: "‡•ê ‡§∂‡•ç‡§∞‡§æ‡§Ç ‡§∂‡•ç‡§∞‡•Ä‡§Ç ‡§∂‡•ç‡§∞‡•å‡§Ç ‡§∏‡§É ‡§ö‡§®‡•ç‡§¶‡•ç‡§∞‡§æ‡§Ø ‡§®‡§Æ‡§É", count: "44,000" },
            "‡§Æ‡§Ç‡§ó‡§≥": { name: "‚ôÇÔ∏è ‡§Æ‡§Ç‡§ó‡§≥", mantra: "‡•ê ‡§ï‡•ç‡§∞‡§æ‡§Ç ‡§ï‡•ç‡§∞‡•Ä‡§Ç ‡§ï‡•ç‡§∞‡•å‡§Ç ‡§∏‡§É ‡§≠‡•å‡§Æ‡§æ‡§Ø ‡§®‡§Æ‡§É", count: "40,000" },
            "‡§¨‡•Å‡§ß": { name: "‚òøÔ∏è ‡§¨‡•Å‡§ß", mantra: "‡•ê ‡§¨‡•ç‡§∞‡§æ‡§Ç ‡§¨‡•ç‡§∞‡•Ä‡§Ç ‡§¨‡•ç‡§∞‡•å‡§Ç ‡§∏‡§É ‡§¨‡•Å‡§ß‡§æ‡§Ø ‡§®‡§Æ‡§É", count: "36,000" },
            "‡§ó‡•Å‡§∞‡•Å": { name: "‚ôÉ ‡§ó‡•Å‡§∞‡•Å", mantra: "‡•ê ‡§ó‡•ç‡§∞‡§æ‡§Ç ‡§ó‡•ç‡§∞‡•Ä‡§Ç ‡§ó‡•ç‡§∞‡•å‡§Ç ‡§∏‡§É ‡§ó‡•Å‡§∞‡§µ‡•á ‡§®‡§Æ‡§É", count: "76,000" },
            "‡§∂‡•Å‡§ï‡•ç‡§∞": { name: "‚ôÄÔ∏è ‡§∂‡•Å‡§ï‡•ç‡§∞", mantra: "‡•ê ‡§¶‡•ç‡§∞‡§æ‡§Ç ‡§¶‡•ç‡§∞‡•Ä‡§Ç ‡§¶‡•ç‡§∞‡•å‡§Ç ‡§∏‡§É ‡§∂‡•Å‡§ï‡•ç‡§∞‡§æ‡§Ø ‡§®‡§Æ‡§É", count: "64,000" },
            "‡§∂‡§®‡§ø": { name: "‚ôÑ ‡§∂‡§®‡§ø", mantra: "‡•ê ‡§™‡•ç‡§∞‡§æ‡§Ç ‡§™‡•ç‡§∞‡•Ä‡§Ç ‡§™‡•ç‡§∞‡•å‡§Ç ‡§∏‡§É ‡§∂‡§®‡•à‡§∂‡•ç‡§ö‡§∞‡§æ‡§Ø ‡§®‡§Æ‡§É", count: "92,000" },
            "‡§∞‡§æ‡§π‡•Ç": { name: "‚òä ‡§∞‡§æ‡§π‡•Ç", mantra: "‡•ê ‡§≠‡•ç‡§∞‡§æ‡§Ç ‡§≠‡•ç‡§∞‡•Ä‡§Ç ‡§≠‡•ç‡§∞‡•å‡§Ç ‡§∏‡§É ‡§∞‡§æ‡§π‡§µ‡•á ‡§®‡§Æ‡§É", count: "72,000" },
            "‡§ï‡•á‡§§‡•Å": { name: "‚òã ‡§ï‡•á‡§§‡•Å", mantra: "‡•ê ‡§∏‡•ç‡§∞‡§æ‡§Ç ‡§∏‡•ç‡§∞‡•Ä‡§Ç ‡§∏‡•ç‡§∞‡•å‡§Ç ‡§∏‡§É ‡§ï‡•á‡§§‡§µ‡•á ‡§®‡§Æ‡§É", count: "68,000" },
            "‡§Æ‡§π‡§æ‡§Æ‡•É‡§§‡•ç‡§Ø‡•Å‡§Ç‡§ú‡§Ø": { name: "üïâ ‡§Æ‡§π‡§æ ‡§Æ‡•É‡§§‡•ç‡§Ø‡•Å‡§Ç‡§ú‡§Ø ‡§Æ‡§Ç‡§§‡•ç‡§∞", mantra: "‡•ê ‡§§‡•ç‡§∞‡•ç‡§Ø‡§Ç‡§¨‡§ï‡§Ç ‡§Ø‡§ú‡§æ‡§Æ‡§π‡•á ‡§∏‡•Å‡§ó‡§®‡•ç‡§ß‡§ø‡§Ç ‡§™‡•Å‡§∑‡•ç‡§ü‡§ø‡§µ‡§∞‡•ç‡§ß‡§®‡§Æ‡•ç ‡•§<br>‡§â‡§∞‡•ç‡§µ‡§æ‡§∞‡•Å‡§ï‡§Æ‡§ø‡§µ ‡§¨‡§®‡•ç‡§ß‡§®‡§æ‡§®‡•ç‡§Æ‡•É‡§§‡•ç‡§Ø‡•ã‡§∞‡•ç‡§Æ‡•Å‡§ï‡•ç‡§∑‡•Ä‡§Ø ‡§Æ‡§æ‡§Æ‡•É‡§§‡§æ‡§§‡•ç ‡••", count: "1,35,000" }
        };

        const container = document.getElementById('dynamicControls');
        for (const [key, options] of Object.entries(jyotishData)) {
            let html = `<div class="form-group"><label>${key}</label><select data-control="${key}">`;
            options.forEach(opt => html += `<option value="${opt}">${opt}</option>`);
            html += `</select></div>`;
            container.insertAdjacentHTML('beforeend', html);
        }
        for (const [key, attrs] of Object.entries(extraTimers)) {
            let stepAttr = attrs.step ? `step="${attrs.step}"` : "";
            container.insertAdjacentHTML('beforeend', `<div class="form-group"><label>${attrs.label}</label><input type="${attrs.type}" data-control="${key}" ${stepAttr} value="00:00${attrs.step ? ':00' : ''}"></div>`);
        }
        
        // COMPACT PLANET & DEGREE GENERATOR WITH VAKRI/ASTA
        const planetContainer = document.getElementById('planetControls');
        planetContainer.insertAdjacentHTML('beforeend', '<h2 style="margin-top: 25px; border-bottom: 1px solid #455A64; padding-bottom: 10px;">‡§ó‡•ç‡§∞‡§π ‡§∏‡•ç‡§•‡§ø‡§§‡•Ä ‡§Ü‡§£‡§ø ‡§Ö‡§Ç‡§∂</h2>');
        planetContainer.insertAdjacentHTML('beforeend', `
            <div style="display: flex; gap: 8px; margin-bottom: 5px; font-size: 12px; color: #B0BEC5;">
                <div style="width: 55px;">‡§ó‡•ç‡§∞‡§π</div>
                <div style="flex: 1;">‡§∞‡§æ‡§∂‡•Ä</div>
                <div style="width: 65px;">‡§Ö‡§Ç‡§∂, ‡§ï‡§≤‡§æ</div>
            </div>
        `);
        
        planetsList.forEach(p => {
            let html = `<div style="margin-bottom: 10px; padding-bottom: 8px; border-bottom: 1px solid #3e4f5e;">`;
            
            // Row 1: Planet, Rashi Select, Degree Input
            html += `<div style="display: flex; gap: 8px; align-items: center; margin-bottom: 5px;">`;
            html += `<div style="width: 55px; font-size: 14px;">${p.id}</div>`;
            
            html += `<select data-control="Rashi_${p.id}" style="flex: 1; padding: 6px; border: 1px solid #455A64; border-radius: 4px; background-color: #34495E; color: white; font-size: 14px;">`;
            rashiSymbols.forEach(opt => html += `<option value="${opt}" ${opt === p.default ? 'selected' : ''}>${opt}</option>`);
            html += `</select>`;
            
            html += `<input type="text" data-control="Deg_${p.id}" value="00¬∞ 00'" placeholder="00¬∞ 00'" style="width: 65px; padding: 6px; border: 1px solid #455A64; border-radius: 4px; background-color: #34495E; color: white; font-size: 14px; text-align: center;">`;
            html += `</div>`;
            
            // Row 2: Vakri & Asta Checkboxes
            html += `<div style="display: flex; gap: 15px; margin-left: 63px;">`;
            html += `<label class="checkbox-item" style="font-size: 12px; margin:0;"><input type="checkbox" data-vakri="${p.id}"> ‡§µ‡§ï‡•ç‡§∞‡§ø (*)</label>`;
            html += `<label class="checkbox-item" style="font-size: 12px; margin:0;"><input type="checkbox" data-asta="${p.id}"> ‡§Ö‡§∏‡•ç‡§§ (^)</label>`;
            html += `</div>`;
            
            html += `</div>`;
            planetContainer.insertAdjacentHTML('beforeend', html);
        });

        const ratnaContainer = document.getElementById('ratnaControl');
        let ratnaHtml = `<div class="form-group"><label>‡§∞‡§§‡•ç‡§® ‡§®‡§ø‡§µ‡§°‡§æ (Select Gemstone)</label><select data-control="RashiRatna">`;
        ratnaOptions.forEach(opt => ratnaHtml += `<option value="${opt.stone}">${opt.label} - ${opt.stone}</option>`);
        ratnaHtml += `</select></div>`;
        ratnaContainer.innerHTML = ratnaHtml;

        const poojaChecklistContainer = document.getElementById('poojaChecklist');
        poojaList.forEach((pooja, i) => {
            poojaChecklistContainer.insertAdjacentHTML('beforeend', `
                <label class="checkbox-item"><input type="checkbox" value="${pooja}" onchange="renderPoojaTable()"> ${pooja}</label>
            `);
        });

        const mantraChecklistContainer = document.getElementById('mantraChecklist');
        Object.keys(mantraData).forEach((key, i) => {
            mantraChecklistContainer.insertAdjacentHTML('beforeend', `
                <label class="checkbox-item"><input type="checkbox" value="${key}" onchange="renderMantraTable()"> ${mantraData[key].name}</label>
            `);
        });

        // Global Event Listeners
        document.body.addEventListener('input', (e) => {
            // Text and Select inputs
            if(e.target.dataset.control) {
                const val = e.target.value;
                document.querySelectorAll(`[data-bind="${e.target.dataset.control}"]`).forEach(el => el.textContent = val);
                
                if(e.target.dataset.control === 'NakshatraPada') {
                    const match = val.match(/\(([^)]+)\)/);
                    if (match && match[1]) document.getElementById('naamAksharDisplay').textContent = match[1] + "..";
                }
                
                // Triggers the chart rotation on Lagna or Rashi changes
                if(e.target.dataset.control === 'Lagna' || e.target.dataset.control.startsWith('Rashi_')) {
                    updateChart();
                }
            }
        });

        // Global Change Listener specifically for Vakri/Asta checkboxes
        document.body.addEventListener('change', (e) => {
            if(e.target.dataset.vakri || e.target.dataset.asta) {
                const pId = e.target.dataset.vakri || e.target.dataset.asta;
                const isVakri = document.querySelector(`input[data-vakri="${pId}"]`).checked;
                const isAsta = document.querySelector(`input[data-asta="${pId}"]`).checked;
                
                let suffix = "";
                if(isVakri) suffix += "*";
                if(isAsta) suffix += "^";
                
                document.querySelectorAll(`[data-suffix="${pId}"]`).forEach(el => el.textContent = suffix);
                
                // Trigger chart update so the * or ^ shows up in the SVG too!
                updateChart();
            }
        });

        // Fire initial inputs to populate bindings & trigger rotation
        document.querySelectorAll('[data-control]').forEach(input => input.dispatchEvent(new Event('input', { bubbles: true })));
        
        // Initial chart draw
        updateChart();

        // --- 3. DASHA ROW GENERATOR ---
        function formatDashaDate(dateString) {
            if(!dateString) return "";
            let formatted = new Intl.DateTimeFormat('mr-IN', { day: '2-digit', month: 'short', year: 'numeric' }).format(new Date(dateString));
            return toEnglishDigits(formatted);
        }

        function addDashaRow() {
            const planet = document.getElementById('dashaPlanetInput').value;
            const startDate = document.getElementById('dashaStartInput').value;
            const endDate = document.getElementById('dashaEndInput').value;
            if(!startDate || !endDate) { alert("‡§ï‡•É‡§™‡§Ø‡§æ ‡§∏‡•Å‡§∞‡•Å‡§µ‡§æ‡§§ ‡§Ü‡§£‡§ø ‡§∂‡•á‡§µ‡§ü‡§ö‡•Ä ‡§§‡§æ‡§∞‡•Ä‡§ñ ‡§®‡§ø‡§µ‡§°‡§æ"); return; }

            const tbody = document.getElementById('dashaTableBody');
            tbody.insertAdjacentHTML('beforeend', `
                <tr class="dasha-row">
                    <td>${planet}</td>
                    <td>${formatDashaDate(startDate)} - ${formatDashaDate(endDate)}</td>
                </tr>
            `);
        }
        function removeLastDashaRow() {
            const tbody = document.getElementById('dashaTableBody');
            if (tbody.lastElementChild) tbody.removeChild(tbody.lastElementChild);
        }
        function clearDashaRows() { document.getElementById('dashaTableBody').innerHTML = ""; }

        // --- 4. POOJA CHECKLIST RENDERER ---
        function renderPoojaTable() {
            const poojaGrid = document.getElementById('poojaGrid');
            const poojaBox = document.getElementById('poojaBox');
            poojaGrid.innerHTML = "";
            const checkedBoxes = poojaChecklistContainer.querySelectorAll('input:checked');
            
            if(checkedBoxes.length === 0) {
                poojaBox.style.display = "none";
            } else {
                poojaBox.style.display = "block";
                checkedBoxes.forEach(cb => {
                    poojaGrid.insertAdjacentHTML('beforeend', `
                        <div style="font-size: 14px; font-weight: 600; color: var(--text-dark); padding: 4px 0; border-bottom: 1px dashed #D3D9DE;">
                            ${cb.value}
                        </div>
                    `);
                });
            }
        }

        // --- 5. MANTRA CHECKLIST RENDERER ---
        function renderMantraTable() {
            const tbody = document.getElementById('mantraTableBody');
            const mantraBox = document.getElementById('mantraBox');
            tbody.innerHTML = "";
            const checkedBoxes = mantraChecklistContainer.querySelectorAll('input:checked');

            if(checkedBoxes.length === 0) {
                mantraBox.style.display = "none";
            } else {
                mantraBox.style.display = "block";
                checkedBoxes.forEach(cb => {
                    const data = mantraData[cb.value];
                    tbody.insertAdjacentHTML('beforeend', `
                        <tr class="dasha-row mantra-row">
                            <td>${data.name}</td>
                            <td>${data.mantra}</td>
                            <td>‡§ú‡§™: <strong>${data.count}</strong></td>
                        </tr>
                    `);
                });
            }
        }

        // --- 6. FALA SHRUTI BIDIRECTIONAL SYNC ---
        const falaSidebarInput = document.getElementById('falaShrutiSidebarInput');
        const falaDisplay = document.getElementById('falaShrutiDisplay');

        falaSidebarInput.addEventListener('input', (e) => { falaDisplay.innerText = e.target.value; });
        falaDisplay.addEventListener('input', (e) => { falaSidebarInput.value = e.target.innerText; });
    </script>
</body>
</html>